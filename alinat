#!/bin/bash
echo "_____________________________________________________________________"
echo "Программа для первой лабораторной работы по программированию,"
echo "реализующая: вывод текущего каталога, запрос имени файла,"
echo "а также нахождение в файловой системе жестких ссылок на данный файл"
echo "Разработчик - Тулина Алина"
echo "Группа 726"
echo "_____________________________________________________________________"

while :
do
	echo "_____________________________________________________________"	
	echo "Задание №1. Вывод текущего каталога:"
	echo $PWD
	echo "_____________________________________________________________"
	
	echo "Задание №2. Запрос имени файла. При ошибке - повторный запрос."
	echo "Пожалуйста, введите имя файла"
	read name
	while :
	do
		if [ -e $name ]
		then
			break
		else
			echo "Файла с таким именем не существует"
			echo "Пожалуйста, введите имя файла еще раз"
			read name
		fi
	done
	echo "_____________________________________________________________"
	
	echo "Задание №3. Вывод жестких ссылок на данный файл."
	find / -xdev -samefile $name
	echo "_____________________________________________________________"

	while :
	do
		echo "Повторить? (y/n)"
		read answer
		if [[ $answer == "y" || $answer == "Y" || $answer == "n" || $answer == "N" ]]
			then
				if [[ $answer == "n" || $answer == "N" ]]
			then
				exit 0
				else
				break
			fi
		else
			echo "Ошибка ввода"
		fi
	done
done
